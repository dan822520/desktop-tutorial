# èµ„äº§äºŒç»´ç ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªé¢å‘æ±½è½¦é›¶éƒ¨ä»¶åˆ¶é€ ä¸šçš„èµ„äº§å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒèµ„äº§å…¥åº“ã€åœ¨ç”¨ã€è°ƒæ‹¨ã€ç»´ä¿®ã€ç›˜ç‚¹ã€æŠ¥åºŸç­‰å…¨æµç¨‹ç®¡ç†ï¼Œé€šè¿‡äºŒç»´ç å®ç°"ä¸€ç‰©ä¸€ç "çš„ç²¾ç»†åŒ–ç®¡ç†ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### ä¸šåŠ¡èƒŒæ™¯
- **è¡Œä¸š**ï¼šæ±½è½¦é›¶éƒ¨ä»¶å®ä½“åˆ¶é€ 
- **è§„æ¨¡**ï¼š4ä¸ªåˆ†å…¬å¸ï¼Œçº¦400åå‘˜å·¥
- **å¹´äº§å€¼**ï¼šçº¦5äº¿å…ƒäººæ°‘å¸
- **ç›®æ ‡**ï¼šå»ºç«‹ç»Ÿä¸€çš„æ•°å­—åŒ–èµ„äº§å°è´¦ï¼Œå®ç°ç›˜ç‚¹æ•ˆç‡æå‡â‰¥80%ï¼Œè´¦å®ä¸€è‡´ç‡â‰¥95%

### æ ¸å¿ƒåŠŸèƒ½
- âœ… èµ„äº§å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå…¥åº“â†’åœ¨ç”¨â†’è°ƒæ‹¨â†’ç»´ä¿®â†’ç›˜ç‚¹â†’æŠ¥åºŸï¼‰
- âœ… äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆä¸æ‰“å°
- âœ… è·¨åˆ†å…¬å¸èµ„äº§è°ƒæ‹¨å®¡æ‰¹æµç¨‹
- âœ… è®¾å¤‡æŠ¥ä¿®ä¸ç»´ä¿®å·¥å•ç®¡ç†
- âœ… æ™ºèƒ½ç›˜ç‚¹ä»»åŠ¡ä¸æŠ¥å‘Š
- âœ… å¤šè§’è‰²æƒé™ç®¡ç†ï¼ˆRBACï¼‰
- âœ… ç§»åŠ¨ç«¯æ‰«ç æ“ä½œï¼ˆH5/å°ç¨‹åºï¼‰
- âœ… Webç®¡ç†åå°

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**ï¼šNode.js + Express + TypeScript
- **æ•°æ®åº“**ï¼šMySQL 5.7+
- **ORM**ï¼šSequelize
- **è®¤è¯**ï¼šJWT (JSON Web Token)
- **äºŒç»´ç **ï¼šqrcodeåº“
- **æ–‡æ¡£**ï¼šRESTful API

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Webç®¡ç†åå°/æ¥å£æµ‹è¯•å°**ï¼šReact 18 + TypeScript + Viteï¼ˆåŸç”Ÿç»„ä»¶å®ç°ï¼Œæ— ç¬¬ä¸‰æ–¹ UI æ¡†æ¶ï¼‰
- **ç§»åŠ¨ç«¯ H5ï¼ˆå¯æ‹“å±•ä¸ºå¾®ä¿¡å°ç¨‹åºï¼‰**ï¼šReact 18 + Vite + `@zxing/browser`ï¼ˆå†…ç½®æ‰«ç èƒ½åŠ›ï¼‰
- **çŠ¶æ€ç®¡ç†**ï¼šReact Hooksï¼ˆ`useState`ã€`useEffect` ç­‰ï¼‰
- **HTTP å®¢æˆ·ç«¯**ï¼šåŸç”Ÿ `fetch` å°è£…
- **æ„å»ºå·¥å…·**ï¼šVite + TypeScript

### æ•°æ®åº“è®¾è®¡
æ ¸å¿ƒæ•°æ®è¡¨åŒ…æ‹¬ï¼š
- ç»„ç»‡ä¸ç”¨æˆ·ï¼š`org`ã€`department`ã€`role`ã€`user`ã€`user_role`
- èµ„äº§ç®¡ç†ï¼š`asset`ã€`asset_category`ã€`asset_photo`
- ä¸šåŠ¡æµç¨‹ï¼š`asset_transfer`ã€`asset_repair`ã€`inventory_task`ã€`inventory_record`
- ç³»ç»Ÿæ—¥å¿—ï¼š`audit_log`

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“ã€JWTç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ models/         # Sequelizeæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€é”™è¯¯å¤„ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°ï¼ˆäºŒç»´ç ã€ç¼–å·ç”Ÿæˆï¼‰
â”‚   â”‚   â””â”€â”€ index.ts        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ scripts/            # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ web-admin/              # Webç®¡ç†åå°ï¼ˆå†…å«æ¥å£æµ‹è¯• Web åº”ç”¨ï¼‰
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app/             # åº”ç”¨å…¥å£ä¸é¡µé¢éª¨æ¶
â”‚       â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶ï¼ˆä¾‹å¦‚å“åº”å±•ç¤ºï¼‰
â”‚       â”œâ”€â”€ features/        # èµ„äº§/ç›˜ç‚¹/ç»´ä¿®/è°ƒæ‹¨ç­‰ä¸šåŠ¡æµ‹è¯•æ¨¡å—
â”‚       â”œâ”€â”€ services/        # API å®¢æˆ·ç«¯ä¸ç½‘ç»œå·¥å…·
â”‚       â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ types/           # å…±äº«ç±»å‹å®šä¹‰
â”œâ”€â”€ mobile-app/             # ç§»åŠ¨ç«¯ H5 åº”ç”¨ï¼ˆç™»å½•ã€æ‰«ç ã€ä¸ªäººä¸­å¿ƒï¼‰
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ api/            # fetch å°è£…
â”‚       â”œâ”€â”€ components/     # ç§»åŠ¨ç«¯ç»„ä»¶ï¼ˆæ‰«ç ã€ç™»å½•ã€èµ„äº§å¡ç‰‡ç­‰ï¼‰
â”‚       â”œâ”€â”€ App.tsx         # åº”ç”¨å…¥å£
â”‚       â””â”€â”€ styles.css      # ç§»åŠ¨ç«¯æ ·å¼
â”œâ”€â”€ docs/                   # æ–‡æ¡£ï¼ˆæ–°å¢è·¨å¹³å°éƒ¨ç½²æŒ‡å—ï¼‰
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.x
- MySQL >= 5.7
- npm æˆ– yarn

### 1. å®‰è£…ä¾èµ–

```bash
# åç«¯
cd backend
npm install
```

```bash
# å‰ç«¯æ¥å£æµ‹è¯•å°
cd web-admin
npm install
```

```bash
# ç§»åŠ¨ç«¯ H5 åº”ç”¨
cd mobile-app
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp backend/.env.example backend/.env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
# ä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€JWTå¯†é’¥ç­‰
vi backend/.env
```

å…³é”®é…ç½®é¡¹ï¼š
```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=asset_qrcode_db
DB_USER=root
DB_PASSWORD=your_password

# JWTé…ç½®
JWT_SECRET=your_jwt_secret_key_change_this_in_production

# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨MySQLå‘½ä»¤è¡Œæ‰§è¡ŒSQLè„šæœ¬
mysql -u root -p < backend/scripts/init_database.sql

# æ–¹æ³•2ï¼šæ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“åç”±Sequelizeè‡ªåŠ¨åŒæ­¥ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
# ç¡®ä¿ .env ä¸­çš„æ•°æ®åº“é…ç½®æ­£ç¡®
# å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŒæ­¥è¡¨ç»“æ„
```

### 4. åˆå§‹åŒ–ç§å­æ•°æ®

```bash
cd backend
npx ts-node scripts/seed.ts
```

åˆå§‹è´¦å·ï¼š
- **è¶…çº§ç®¡ç†å‘˜**ï¼šç”¨æˆ·å `admin`ï¼Œå¯†ç  `admin123`
- **æµ‹è¯•å‘˜å·¥**ï¼šç”¨æˆ·å `employee001`ï¼Œå¯†ç  `123456`

> æç¤ºï¼šåç»­å¯ä»¥é€šè¿‡æ¥å£æµ‹è¯•å°ä¸­çš„â€œæµ‹è¯•æ•°æ®â€é¢æ¿æˆ–è°ƒç”¨ `/api/test-data` æ¥å£å¿«é€Ÿç”Ÿæˆæ›´å¤šè§’è‰²ä¸ä¸šåŠ¡æ•°æ®ã€‚

### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm run build
npm start
```

æœåŠ¡å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:3000

### 6. å¯åŠ¨å‰ç«¯åº”ç”¨

#### Web ç®¡ç†åå°ï¼ˆæ¥å£æµ‹è¯•å°ï¼‰

```bash
cd web-admin
npm run dev
# æˆ–
npm run build
npm run preview
```

è®¿é—®ï¼šhttp://localhost:5173ï¼ˆé»˜è®¤ç«¯å£ï¼Œå¯åœ¨ `vite.config.ts` ä¸­è°ƒæ•´ï¼‰ã€‚

#### ç§»åŠ¨ç«¯ H5ï¼ˆæ‰«ç å…¥å£ï¼Œå¯å°è£…ä¸ºå°ç¨‹åº WebViewï¼‰

```bash
cd mobile-app
npm run dev
# æˆ–
npm run build
npm run preview
```

è®¿é—®ï¼šhttp://localhost:4174ã€‚é¦–æ¬¡è¿›å…¥è¯·é…ç½® API åœ°å€å¹¶ä½¿ç”¨æœ‰æ•ˆè´¦å·ç™»å½•ï¼Œå³å¯ä½“éªŒç™»å½•ã€æ‰«ç èµ„äº§ã€æŸ¥çœ‹ä¸ªäººä¿¡æ¯ç­‰æ ¸å¿ƒæµç¨‹ã€‚

> è‹¥éœ€è¦åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨ï¼Œå¯å°† H5 åº”ç”¨éƒ¨ç½²åˆ° HTTPS åŸŸåå¹¶ä½¿ç”¨ WebView æ–¹å¼åµŒå…¥ï¼Œæ‰«ç èƒ½åŠ›æ²¿ç”¨æµè§ˆå™¨ APIã€‚

### 7. APIæµ‹è¯•

ä½¿ç”¨Postmanæˆ–curlæµ‹è¯•APIï¼š

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3000/health

# ç™»å½•
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# è·å–èµ„äº§åˆ—è¡¨ï¼ˆéœ€è¦JWT tokenï¼‰
curl http://localhost:3000/api/assets \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### 8. æµ‹è¯•æ•°æ®å¡«å……å·¥å…·

æ¥å£æµ‹è¯•å‰ç«¯æ–°å¢â€œæµ‹è¯•æ•°æ®â€æ ‡ç­¾é¡µï¼ˆä»…è¶…çº§ç®¡ç†å‘˜å¯è§ï¼‰ï¼Œå¯ä¸€é”®å®Œæˆä»¥ä¸‹æ“ä½œï¼š

1. **å¡«å……æ¼”ç¤ºæ•°æ®**ï¼šåˆ›å»º 3 ä¸ªç»„ç»‡ã€3 ä¸ªéƒ¨é—¨ã€4 ä¸ªæµ‹è¯•è´¦å·ä»¥åŠè¦†ç›–èµ„äº§ã€è°ƒæ‹¨ã€ç»´ä¿®ã€ç›˜ç‚¹çš„å®Œæ•´æ ·ä¾‹æ•°æ®ã€‚
2. **å¸è½½æ¼”ç¤ºæ•°æ®**ï¼šåˆ é™¤æ‰€æœ‰ä»¥ `TEST-` æ ‡è¯†çš„æ¼”ç¤ºæ•°æ®ï¼Œé¿å…æ±¡æŸ“è‡ªå®šä¹‰ç¯å¢ƒã€‚
3. **æŸ¥çœ‹çŠ¶æ€**ï¼šéšæ—¶æŸ¥çœ‹æµ‹è¯•æ•°æ®æ˜¯å¦å·²å®‰è£…ä»¥åŠå„ä¸šåŠ¡å®ä½“æ•°é‡ã€‚

å¡«å……åå°†æ–°å¢ä»¥ä¸‹æµ‹è¯•è´¦å·ï¼ˆé»˜è®¤å¯†ç  `Test1234!`ï¼‰ï¼š

| ç”¨æˆ·å | è§’è‰² | ç”¨é€” |
|--------|------|------|
| `test-super` | SUPER_ADMIN | éªŒè¯è¶…çº§ç®¡ç†å‘˜æµç¨‹åŠæµ‹è¯•æ•°æ®é¢æ¿ |
| `test-manager` | ORG_ADMIN | æ¼”ç¤ºè°ƒæ‹¨ã€ç›˜ç‚¹å®¡æ‰¹æµç¨‹ |
| `test-tech` | REPAIR_STAFF, EMPLOYEE | æ¼”ç¤ºç»´ä¿®æ´¾å·¥ä¸æ‰«ç ç›˜ç‚¹ |
| `test-employee` | EMPLOYEE | æ¼”ç¤ºæ™®é€šå‘˜å·¥æäº¤ç”³è¯· |

ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ API è¿›è¡Œæ“ä½œï¼ˆéœ€è¦è¶…çº§ç®¡ç†å‘˜ Tokenï¼‰ï¼š

```bash
# æŸ¥è¯¢æµ‹è¯•æ•°æ®çŠ¶æ€
curl http://localhost:3000/api/test-data \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# å¡«å……æµ‹è¯•æ•°æ®
curl -X POST http://localhost:3000/api/test-data \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# å¸è½½æµ‹è¯•æ•°æ®
curl -X DELETE http://localhost:3000/api/test-data \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## ğŸ“š APIæ–‡æ¡£

## ğŸ“± ç§»åŠ¨ç«¯ H5 åŠŸèƒ½æ¦‚è§ˆ

- **ç»Ÿä¸€ç™»å½•**ï¼šæ”¯æŒè¾“å…¥åç«¯ API åœ°å€ä¸è´¦å·å¯†ç ï¼Œå®Œæˆ JWT ç™»å½•å¹¶ç¼“å­˜ Tokenã€‚
- **æ‰«ç èµ„äº§**ï¼šåŸºäºæµè§ˆå™¨æ‘„åƒå¤´èƒ½åŠ›å’Œ `@zxing/browser` å®ç°å®æ—¶æ‰«ç ï¼Œè‡ªåŠ¨è¯·æ±‚ `/api/assets/scan/:asset_id` æ¥å£ã€‚
- **æ‰‹åŠ¨å½•å…¥å…œåº•**ï¼šæ‰«ç å¼‚å¸¸æ—¶å¯æ‰‹åŠ¨è¾“å…¥èµ„äº§ç¼–å·è¿›è¡ŒæŸ¥è¯¢ã€‚
- **èµ„äº§è¯¦æƒ…å±•ç¤º**ï¼šæˆåŠŸæ‰«ç åä»¥å¡ç‰‡å½¢å¼å±•ç¤ºèµ„äº§çŠ¶æ€ã€ä½ç½®ã€è´Ÿè´£äººã€åˆ†ç±»ç­‰å…³é”®ä¿¡æ¯ã€‚
- **ä¸ªäººä¸­å¿ƒ**ï¼šå±•ç¤ºå½“å‰ç”¨æˆ·ç»„ç»‡ã€éƒ¨é—¨ã€è§’è‰²ä¿¡æ¯ï¼Œå¹¶æ”¯æŒåœ¨ç§»åŠ¨ç«¯ç›´æ¥è°ƒæ•´ API åœ°å€ã€‚
- **å¾…åŠå ä½**ï¼šä¿ç•™å®¡æ‰¹ã€ç›˜ç‚¹ç­‰é«˜çº§åŠŸèƒ½å…¥å£ï¼Œå¼•å¯¼ç®¡ç†å‘˜å‰å¾€ Web åå°å¤„ç†ã€‚

> è¯¥ H5 åº”ç”¨å¯ä½œä¸ºå¾®ä¿¡å°ç¨‹åº WebView å¤–å£³çš„æ ¸å¿ƒé¡µé¢ä»£ç ï¼Œåç»­ä»…éœ€å°è£…å¾®ä¿¡ç™»å½•æˆ–è°ƒç”¨å¾®ä¿¡æ‰«ç èƒ½åŠ›å³å¯æ— ç¼è¿ç§»ã€‚

## ğŸ–¥ï¸ Web ç®¡ç†åå°ï¼ˆæ¥å£æµ‹è¯•å°ï¼‰èƒ½åŠ›

- **è´¦å·ç™»å½•ä¸ Token ç®¡ç†**ï¼šè¾“å…¥ API åœ°å€ä¸å‡­è¯åå³å¯ç™»å½•ï¼Œè‡ªåŠ¨ç¼“å­˜ Token å¹¶å±•ç¤º `/auth/profile` å“åº”ã€‚
- **èµ„äº§æ¨¡å—**ï¼šæä¾›èµ„äº§åˆ—è¡¨ã€åˆ›å»ºã€è¯¦æƒ…ã€æ‰«ç æŸ¥è¯¢ã€äºŒç»´ç æ‰¹é‡ç”Ÿæˆç­‰æ¥å£æ“ä½œè¡¨å•ã€‚
- **è°ƒæ‹¨ / æŠ¥ä¿® / ç›˜ç‚¹**ï¼šåˆ†åˆ«æä¾›å¾…åŠæ¥å£çš„è°ƒç”¨å™¨ï¼Œæ–¹ä¾¿åœ¨å¼€å‘é˜¶æ®µéªŒè¯æµç¨‹ APIã€‚
- **ç»„ç»‡ä¸ç”¨æˆ·ç®¡ç†**ï¼šæ”¯æŒè¶…çº§ç®¡ç†å‘˜ç»´æŠ¤ç»„ç»‡ã€éƒ¨é—¨ã€ç”¨æˆ·ã€è§’è‰²ä¸åˆ†é…å…³ç³»ã€‚
- **æµ‹è¯•æ•°æ®é¢æ¿**ï¼šä¸€é”®å®‰è£…/å¸è½½å®˜æ–¹æµ‹è¯•æ•°æ®é›†ï¼Œä¾¿äºæ¼”ç¤ºç¯å¢ƒåˆå§‹åŒ–ã€‚

### è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/login` | ç”¨æˆ·ç™»å½• |
| GET | `/api/auth/profile` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| POST | `/api/auth/logout` | ç”¨æˆ·ç™»å‡º |

### èµ„äº§ç®¡ç†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/assets` | è·å–èµ„äº§åˆ—è¡¨ | æ‰€æœ‰ç”¨æˆ· |
| GET | `/api/assets/:id` | è·å–èµ„äº§è¯¦æƒ… | æ‰€æœ‰ç”¨æˆ· |
| GET | `/api/assets/scan/:asset_id` | æ‰«ç æŸ¥è¯¢èµ„äº§ | æ‰€æœ‰ç”¨æˆ· |
| POST | `/api/assets` | åˆ›å»ºèµ„äº§ | ç®¡ç†å‘˜ |
| PUT | `/api/assets/:id` | æ›´æ–°èµ„äº§ | ç®¡ç†å‘˜ |
| DELETE | `/api/assets/:id` | åˆ é™¤èµ„äº§ï¼ˆæ ‡è®°æŠ¥åºŸï¼‰ | ç®¡ç†å‘˜ |
| POST | `/api/assets/qrcode/batch` | æ‰¹é‡ç”ŸæˆäºŒç»´ç  | ç®¡ç†å‘˜ |

### æµ‹è¯•æ•°æ®æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/test-data` | è·å–æµ‹è¯•æ•°æ®å®‰è£…çŠ¶æ€åŠæ•°é‡ | SUPER_ADMIN / ORG_ADMIN |
| POST | `/api/test-data` | å¡«å……å®˜æ–¹æµ‹è¯•æ•°æ®é›† | SUPER_ADMIN |
| DELETE | `/api/test-data` | å¸è½½å®˜æ–¹æµ‹è¯•æ•°æ®é›† | SUPER_ADMIN |

### è°ƒæ‹¨ç®¡ç†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/transfers` | è·å–è°ƒæ‹¨åˆ—è¡¨ | æ‰€æœ‰ç”¨æˆ· |
| POST | `/api/transfers` | åˆ›å»ºè°ƒæ‹¨ç”³è¯· | æ‰€æœ‰ç”¨æˆ· |
| PUT | `/api/transfers/:id/approve` | å®¡æ‰¹è°ƒæ‹¨ | ç®¡ç†å‘˜ |

### æŠ¥ä¿®ç®¡ç†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/repairs` | è·å–ç»´ä¿®å·¥å•åˆ—è¡¨ | æ‰€æœ‰ç”¨æˆ· |
| POST | `/api/repairs` | åˆ›å»ºæŠ¥ä¿® | æ‰€æœ‰ç”¨æˆ· |
| PUT | `/api/repairs/:id/assign` | æ´¾å• | ç®¡ç†å‘˜ |
| PUT | `/api/repairs/:id/complete` | å®Œæˆç»´ä¿® | ç»´ä¿®äººå‘˜/ç®¡ç†å‘˜ |

### ç›˜ç‚¹ç®¡ç†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/inventory/tasks` | è·å–ç›˜ç‚¹ä»»åŠ¡åˆ—è¡¨ | æ‰€æœ‰ç”¨æˆ· |
| POST | `/api/inventory/tasks` | åˆ›å»ºç›˜ç‚¹ä»»åŠ¡ | ç®¡ç†å‘˜ |
| POST | `/api/inventory/tasks/:task_id/scan` | æ‰«ç ç›˜ç‚¹ | æ‰€æœ‰ç”¨æˆ· |
| PUT | `/api/inventory/tasks/:id/finish` | å®Œæˆç›˜ç‚¹ | ç®¡ç†å‘˜ |
| GET | `/api/inventory/tasks/:id/report` | è·å–ç›˜ç‚¹æŠ¥å‘Š | æ‰€æœ‰ç”¨æˆ· |

## ğŸ‘¥ è§’è‰²æƒé™è¯´æ˜

### è§’è‰²å®šä¹‰

| è§’è‰²ä»£ç  | è§’è‰²åç§° | æƒé™èŒƒå›´ |
|---------|---------|---------|
| SUPER_ADMIN | è¶…çº§ç®¡ç†å‘˜ | å…¨éƒ¨æƒé™ï¼Œå¯è®¿é—®æ‰€æœ‰ç»„ç»‡æ•°æ® |
| ORG_ADMIN | åˆ†å…¬å¸ç®¡ç†å‘˜ | ç®¡ç†æœ¬å…¬å¸èµ„äº§ã€å®¡æ‰¹è°ƒæ‹¨/æŠ¥ä¿® |
| DEPT_ADMIN | éƒ¨é—¨èµ„äº§ç®¡ç†å‘˜ | ç®¡ç†æœ¬éƒ¨é—¨èµ„äº§ã€æ‰§è¡Œç›˜ç‚¹ |
| REPAIR_STAFF | ç»´ä¿®äººå‘˜ | æ¥æ”¶å’Œå¤„ç†ç»´ä¿®å·¥å• |
| EMPLOYEE | æ™®é€šå‘˜å·¥ | æŸ¥çœ‹èµ„äº§ã€æäº¤æŠ¥ä¿®/è°ƒæ‹¨ç”³è¯· |

### æƒé™çŸ©é˜µ

| åŠŸèƒ½ | è¶…ç®¡ | åˆ†å…¬å¸ç®¡ç†å‘˜ | éƒ¨é—¨ç®¡ç†å‘˜ | ç»´ä¿®äººå‘˜ | å‘˜å·¥ |
|-----|------|------------|-----------|---------|-----|
| èµ„äº§æŸ¥çœ‹ | âœ… å…¨éƒ¨ | âœ… æœ¬å…¬å¸ | âœ… æœ¬éƒ¨é—¨ | âœ… ç›¸å…³ | âœ… ç›¸å…³ |
| èµ„äº§åˆ›å»º/ç¼–è¾‘ | âœ… | âœ… | âœ… éƒ¨åˆ†å­—æ®µ | âŒ | âŒ |
| è°ƒæ‹¨ç”³è¯· | âœ… | âœ… | âœ… | âŒ | âœ… |
| è°ƒæ‹¨å®¡æ‰¹ | âœ… | âœ… | âŒ | âŒ | âŒ |
| æŠ¥ä¿®æäº¤ | âœ… | âœ… | âœ… | âŒ | âœ… |
| ç»´ä¿®æ´¾å• | âœ… | âœ… | âœ… | âŒ | âŒ |
| ç»´ä¿®å¤„ç† | âœ… | âœ… | âœ… | âœ… | âŒ |
| ç›˜ç‚¹ä»»åŠ¡åˆ›å»º | âœ… | âœ… | âŒ | âŒ | âŒ |
| ç›˜ç‚¹æ‰§è¡Œ | âœ… | âœ… | âœ… | âŒ | âŒ |

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„APIæ¥å£

1. **åˆ›å»ºæ¨¡å‹**ï¼ˆå¦‚æœéœ€è¦æ–°è¡¨ï¼‰
```typescript
// backend/src/models/YourModel.ts
import { Model, DataTypes } from 'sequelize';
import sequelize from '../config/database';

class YourModel extends Model {
  // å®šä¹‰å­—æ®µç±»å‹
}

YourModel.init({
  // å®šä¹‰å­—æ®µ
}, {
  sequelize,
  tableName: 'your_table',
  timestamps: true
});

export default YourModel;
```

2. **åˆ›å»ºæ§åˆ¶å™¨**
```typescript
// backend/src/controllers/yourController.ts
import { Request, Response, NextFunction } from 'express';
import { YourModel } from '../models';

export const getList = async (req: Request, res: Response, next: NextFunction) => {
  try {
    const data = await YourModel.findAll();
    res.json({ data });
  } catch (error) {
    next(error);
  }
};
```

3. **åˆ›å»ºè·¯ç”±**
```typescript
// backend/src/routes/your-routes.ts
import { Router } from 'express';
import * as controller from '../controllers/yourController';
import { authenticate } from '../middleware/auth';

const router = Router();
router.use(authenticate);
router.get('/', controller.getList);

export default router;
```

4. **æ³¨å†Œè·¯ç”±**
```typescript
// backend/src/index.ts
import yourRoutes from './routes/your-routes';
app.use('/api/your-resource', yourRoutes);
```

### æ•°æ®åº“è¿ç§»

ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ä¸“ä¸šçš„æ•°æ®åº“è¿ç§»å·¥å…·ï¼Œå¦‚ï¼š
- Sequelize CLI
- TypeORM migrations
- æ‰‹åŠ¨SQLè„šæœ¬ç‰ˆæœ¬ç®¡ç†

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint è§„åˆ™
- ç»Ÿä¸€ä½¿ç”¨ async/await å¤„ç†å¼‚æ­¥
- é”™è¯¯ç»Ÿä¸€é€šè¿‡ next(error) ä¼ é€’ç»™é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- æ‰€æœ‰APIè¿”å›æ ¼å¼ç»Ÿä¸€ï¼š`{ data: ..., message: ... }` æˆ– `{ error: ... }`

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹**ï¼š
   - JWT_SECRET
   - æ•°æ®åº“å¯†ç 
   - é»˜è®¤ç®¡ç†å‘˜å¯†ç 

2. **HTTPSéƒ¨ç½²**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPS

3. **é€Ÿç‡é™åˆ¶**ï¼šå·²å†…ç½®ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´

4. **SQLæ³¨å…¥é˜²æŠ¤**ï¼šä½¿ç”¨Sequelizeå‚æ•°åŒ–æŸ¥è¯¢è‡ªåŠ¨é˜²æŠ¤

5. **XSSé˜²æŠ¤**ï¼šå‰ç«¯éœ€å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰

6. **CSRFé˜²æŠ¤**ï¼šJWTå·²ç»å¤©ç„¶é˜²æŠ¤CSRF

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

> éœ€è¦è·¨å¹³å°çš„è¯¦ç»†éƒ¨ç½²è„šæœ¬ä¸è¿ç»´å»ºè®®ï¼Œè¯·å‚é˜… [docs/deployment.md](docs/deployment.md)ã€‚

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# æ„å»ºåç«¯é•œåƒ
cd backend
docker build -t asset-qrcode-backend .

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 3000:3000 \
  -e DB_HOST=your_db_host \
  -e DB_PASSWORD=your_db_password \
  --name asset-backend \
  asset-qrcode-backend
```

### 4. å¯åŠ¨å‰ç«¯æ¥å£æµ‹è¯•å°

```bash
cd web-admin
npm run dev
```

å¼€å‘æ¨¡å¼ä¸‹é»˜è®¤ç›‘å¬ `http://localhost:5173`ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®å³å¯ã€‚åœ¨ç™»å½•é¡µå¡«å†™åç«¯ API åœ°å€ï¼ˆå¦‚ `http://localhost:3000/api`ï¼‰ä¸æµ‹è¯•è´¦å·ï¼Œç™»å½•åå¯åœ¨é¡µé¢ä¸­ç›´æ¥è°ƒç”¨èµ„äº§ã€è°ƒæ‹¨ã€ç»´ä¿®ã€ç›˜ç‚¹ç­‰æ ¸å¿ƒæ¥å£ï¼Œä¾¿äºåŠŸèƒ½éªŒè¯ã€‚

å¦‚éœ€æ‰“åŒ…æˆé™æ€ç«™ç‚¹ï¼Œå¯æ‰§è¡Œï¼š

```bash
npm run build
```

ç¼–è¯‘äº§ç‰©é»˜è®¤è¾“å‡ºåˆ° `web-admin/dist`ï¼Œå¯éƒ¨ç½²åˆ°ä»»æ„æ”¯æŒé™æ€æ–‡ä»¶çš„æœåŠ¡å™¨ï¼ˆWindowsã€macOSã€Linux ç¯å¢ƒå‡å¯ä½¿ç”¨ Node.js å®‰è£…ä¾èµ–åæ„å»ºï¼‰ã€‚

### LinuxæœåŠ¡å™¨éƒ¨ç½²

```bash
# 1. å®‰è£…Node.jså’ŒMySQL
# 2. å…‹éš†ä»£ç 
git clone <your-repo-url>
cd asset-qrcode-system/backend

# 3. å®‰è£…ä¾èµ–
npm install --production

# 4. æ„å»º
npm run build

# 5. ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹
npm install -g pm2
pm2 start dist/index.js --name asset-backend
pm2 save
pm2 startup
```

### Nginxåå‘ä»£ç†é…ç½®

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location / {
        root /path/to/web-admin/dist;
        try_files $uri $uri/ /index.html;
    }
}
```

## ğŸ§ª æµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•ï¼ˆå¾…å®ç°ï¼‰
npm test

# é›†æˆæµ‹è¯•ï¼ˆå¾…å®ç°ï¼‰
npm run test:integration

# APIæµ‹è¯•
# ä½¿ç”¨ Postman å¯¼å…¥ docs/api-collection.json
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“ç´¢å¼•**ï¼šå·²åœ¨å…³é”®å­—æ®µåˆ›å»ºç´¢å¼•
2. **åˆ†é¡µæŸ¥è¯¢**ï¼šæ‰€æœ‰åˆ—è¡¨æ¥å£æ”¯æŒåˆ†é¡µ
3. **ç¼“å­˜ç­–ç•¥**ï¼šå¯ä½¿ç”¨Redisç¼“å­˜ç”¨æˆ·ä¿¡æ¯å’Œæƒé™
4. **CDN**ï¼šé™æ€èµ„æºï¼ˆäºŒç»´ç å›¾ç‰‡ï¼‰ä½¿ç”¨CDN
5. **æ•°æ®åº“è¿æ¥æ± **ï¼šå·²é…ç½®Sequelizeè¿æ¥æ± 

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥MySQLæ˜¯å¦å¯åŠ¨
- æ£€æŸ¥.envä¸­çš„æ•°æ®åº“é…ç½®
- ç¡®è®¤æ•°æ®åº“ç”¨æˆ·æƒé™

### 2. JWT tokenè¿‡æœŸ
- é»˜è®¤æœ‰æ•ˆæœŸ7å¤©ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¿®æ”¹
- å‰ç«¯éœ€å®ç°tokenåˆ·æ–°æœºåˆ¶

### 3. äºŒç»´ç å›¾ç‰‡æ— æ³•è®¿é—®
- ç¡®ä¿ `uploads/qrcodes` ç›®å½•å­˜åœ¨
- æ£€æŸ¥æ–‡ä»¶æƒé™
- ç¡®è®¤é™æ€æ–‡ä»¶æœåŠ¡é…ç½®æ­£ç¡®

## ğŸ—ºï¸ è·¯çº¿å›¾

### å·²å®Œæˆ
- âœ… åç«¯æ ¸å¿ƒAPIå¼€å‘
- âœ… æ•°æ®åº“è®¾è®¡ä¸å®ç°
- âœ… è®¤è¯ä¸æƒé™ç³»ç»Ÿ
- âœ… äºŒç»´ç ç”ŸæˆåŠŸèƒ½

### å¾…å¼€å‘
- â³ Webç®¡ç†åå°å‰ç«¯
- â³ ç§»åŠ¨ç«¯H5åº”ç”¨
- â³ Excelæ‰¹é‡å¯¼å…¥å¯¼å‡º
- â³ æ•°æ®æŠ¥è¡¨ä¸ç»Ÿè®¡å›¾è¡¨
- â³ å¾®ä¿¡å°ç¨‹åºç‰ˆæœ¬
- â³ ä¸è´¢åŠ¡ç³»ç»Ÿå¯¹æ¥

## ğŸ“ è”ç³»ä¸æ”¯æŒ

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](your-repo-url/issues)
- æŠ€æœ¯æ–‡æ¡£ï¼š[Wiki](your-repo-url/wiki)

## ğŸ“„ å¼€æºåè®®

MIT License

---

**æ³¨æ„**ï¼šæœ¬ç³»ç»Ÿä¸ºä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼Œè¯·å¦¥å–„ä¿ç®¡è´¦å·å¯†ç å’Œæ•æ„Ÿé…ç½®ä¿¡æ¯ã€‚
